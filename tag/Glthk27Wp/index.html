<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    原理 | 1742·小博文
</title>
<link rel="shortcut icon" href="https://blog.ss1742.com/favicon.ico?v=1564588914399">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://blog.ss1742.com/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://blog.ss1742.com/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://blog.ss1742.com">
                <img class="avatar" src="https://blog.ss1742.com/images/avatar.png?v=1564588914399" alt="">
            </a>
            <div class="site-title">
                <h1>
                    1742·小博文
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
    <div class="i-card">
        <b>标签：#
        原理</b>
    </div>
    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/react-diff">
                        react diff 原理浅析
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-17</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-primary">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/5RkcZhpNN" class="post-tag i-tag
                            i-tag-error">
            #react
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            React 通过制定大胆的 diff 策略，将 O(n3) 复杂度的问题转换成 O(n) 复杂度的问题；
React 是如何将 O(n3) 复杂度的问题转换成 O(n) 的？

只进行同级比较
不同类的 React 组件会被当做完全不同的 DOM 结构而被完全替换
key prop：开发人员可以通过给 Virtual DOM 一个唯一的 key 属性暗示 React 这是同一个 DOM 结构，反之若 key 值不同则会被当做完全不同的 DOM 结构。

React 通过分层求异的策略，对 tree diff 进行算法优化；
React 通过相同类生成相似树形结构，不同类生成不同树形结构的策略，对 component diff 进行算法优化。
React 通过设置唯一 key 的策略，对 element diff 进行算法优化；
建议，在开发组件时，保持稳定的 DOM 结构会有助于性能的提升；
建议，在开发过程中，尽量减少类似将最后一个节点移动到列表首部的操作，当节点数量过大或更新操作过于频繁时，在一定程度上会影响 React 的渲染性能。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/react-diff">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promiseall-shi-xian-yuan-li">
                        Promise.all 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-16</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-other_3">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-primary">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Promise.prototype.all = function(promises) {
    return new Promise((resolve, reject) =&amp;gt; {
        if (!isArray(promises)) {
            return reject(new TypeError(&#39;Arguments not Array&#39;));
        }
        let resolves = 0;
        let len = promises.length;
        let result = [];
        for (let p of promises) {
            Promise.resolve(p).then(res =&amp;gt; {
                resolves++;
                result.push(res);
                if (resolves === len) {
                    resolve(result);
                }
            }, rej =&amp;gt; {
                return rekect(rej);
            })
        }
    })
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promiseall-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promisefinally-shi-xian-yuan-li">
                        Promise.finally 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-16</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-other_4">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Promise.prototype.finally = function(callback) {
    let P = this.constructor;
    return this.then(
        value  =&amp;gt; P.resolve(callback()).then(() =&amp;gt; value),
        reason =&amp;gt; P.resolve(callback()).then(() =&amp;gt; { throw reason })
    );
};


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promisefinally-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promiserace-shi-xian-yuan-li">
                        Promise.race 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-16</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-error">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Promise.prototype.race = function(promises) {
    return new Promise((resolve, reject) =&amp;gt; {
        if (!isArray(promises)) {
            return reject(new TypeError(&#39;Arguments not Array&#39;));
        }
        for (let p of promises) {
            Promise.resolve(p).then(
                res =&amp;gt; resolve(res), 
                rej =&amp;gt; reject(rej)
            )
        }
    })
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promiserace-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promise-shi-xian-yuan-li">
                        Promise 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-15</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-error">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-other_4">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            function myPromise(exe) {
    let self = this;
    self.status = &#39;pending&#39;;
    self.value = null;
    self.reason = null;
    self.onResolveCbk = [];
    self.onRejectCbk = [];
    function resolve(value) {
        if (self.status === &#39;pending&#39;) {
            self.value = value;
            self.status = &#39;resolved&#39;;
            self.onResolveCbk.map(fn =&amp;gt; fn());
        }
    }
    function reject(reason) {
        if (self.status === &#39;pending&#39;) {
            self.reason = reason;
            self.status = &#39;rejected&#39;;
            self.onResolveCbk.map(fn =&amp;gt; fn());
        }
    }
    exe(resolve, reject);
}

myPromise.prototype.then = function(onFulfilled, onRejected) {
    let self = this;
    if (self.status === &#39;pending&#39;) {
        self.onResolveCbk.push(() =&amp;gt; onFulfilled(self.value));
        self.onRejectCbk.push(() =&amp;gt; onRejected(self.reason));
    }
    if (self.status === &#39;resolved&#39;) {
        onFulfilled(self.value);
    }
    if (self.status === &#39;rejected&#39;) {
        onRejected(self.reason);
    }
}

let mp = new myPromise((resolve, reject) =&amp;gt; {
    setTimeout(() =&amp;gt; {
        resolve(2);
    }, 200);
});

mp.then(res =&amp;gt; console.log(&#39;success&#39;, res));


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promise-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/new-de-shi-xian-yuan-li">
                        new 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-15</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-success">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-warning">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            原理

创建一个空对象，构造函数中的 this 指向这个空对象
这个新对象被执行 [[原型]] 连接
执行构造函数方法，属性和方法被添加到 this 引用的对象中
如果构造函数中没有返回其它对象，那么返回 this，即创建的这个的新对象，否则，返回构造函数中返回的对象

function _new(fn, ...arg) {
    let obj = Object.create(fn.prototype);
    let ret = fn.apply(obj, arg);
    return ret instanceof Object ? ret : obj;
}

Object.create() 方法创建一个新对象，使用现有的对象来提供新创建的对象的 __proto__

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/new-de-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- 翻页 -->
                
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- 个人信息 -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://blog.ss1742.com/images/avatar.png?v=1564588914399)">
        </div>
        <h1 class="id_card-title">
            1742·小博文
        </h1>
        <h2 class="id_card-description">
            这是我的真博客
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                <a href="https://github.com/bowenjun" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-github"></i></a>
                
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- 公告栏 -->
                        

                </div>
            </div>



            <div class="site-footer">
  1742 | 
  <a class="rss" href="https://blog.ss1742.com/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>