<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    http | 1742·小博文
</title>
<link rel="shortcut icon" href="https://blog.ss1742.com/favicon.ico?v=1573203446058">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://blog.ss1742.com/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://blog.ss1742.com/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://blog.ss1742.com">
                <img class="avatar" src="https://blog.ss1742.com/images/avatar.png?v=1573203446058" alt="">
            </a>
            <div class="site-title">
                <h1>
                    1742·小博文
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
    <div class="i-card">
        <b>标签：#
        http</b>
    </div>
    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/http-content-type">
                        http content-type
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-23</time>
                    
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-other_3">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            content-type 是 http 实体首部字段，用来说明请求或返回的消息主体是用何种方式编码，在 request header 和 response header 中都存在
类型
application/x-www-form-urlencoded
浏览器原生 form 表单
提交数据按照 key1=val1&amp;amp;key2=val2的方式进行编码，key 和 value 都进行了 url 转码
POST [http://www.example.com](http://www.example.com) HTTP/1.1 
Content-Type: application/x-[www-form-urlencoded](http://www-form-urlencoded);charset=utf-8 

title=test&amp;amp;sub%5B%5D=1&amp;amp;sub%5B%5D=2&amp;amp;sub%5B%5D=3 

multipart/form-data
常见的 post 数据提交方式，上传文件必须设置 enctype=&amp;quot;multipart/form-data&amp;quot;
POST /foo HTTP/1.1
Content-Length: 68137
Content-Type: multipart/form-data; boundary=---------------------------974767299852498929531610575

---------------------------974767299852498929531610575
Content-Disposition: form-data; name=&amp;quot;description&amp;quot;

some text
---------------------------974767299852498929531610575
Content-Disposition: form-data; name=&amp;quot;myFile&amp;quot;; filename=&amp;quot;foo.txt&amp;quot;
Content-Type: text/plain

(content of the uploaded file foo.txt)
---------------------------974767299852498929531610575--


首先生成 boundary 分割不同字段，避免与正文重复
消息主体按照字段分成多个部分，每个部分以 --boundary 开始，消息主体再以 --boundary-- 结束

application/json
消息主体是序列化的 JSON 字符串
text/xml
使用 HTTP 作为传输协议，XML 作为编码方式

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/http-content-type">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/304-zhuang-tai-ma">
                        304 状态码
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-13</time>
                    
                        <a href="https://blog.ss1742.com/tag/5CynFjhOR" class="post-tag i-tag
                            i-tag-other_4">
            #状态码
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-other_1">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            soon

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/304-zhuang-tai-ma">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/302-zen-me-shi-xian-de">
                        302 怎么实现的
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-13</time>
                    
                        <a href="https://blog.ss1742.com/tag/5CynFjhOR" class="post-tag i-tag
                            i-tag-primary">
            #状态码
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-info">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            301，302 都是 HTTP 状态的编码，都代表着某个 URL 发生了转移，不同之处在于：
　　301 redirect: 301 代表永久性转移(Permanently Moved)。
　　302 redirect: 302 代表暂时性转移(Temporarily Moved )。
其实 301、302 的重定向都是通过对 http协议 的 location 的修改来实现的

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/302-zen-me-shi-xian-de">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/http2-de-duo-lu-fu-yong">
                        http2的多路复用
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-11</time>
                    
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-other_3">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            在 HTTP/1 中，每次请求都会建立一次HTTP连接，也就是我们常说的3次握手4次挥手，这个过程在一次请求过程中占用了相当长的时间，即使开启了 Keep-Alive ，解决了多次连接的问题，但是依然有两个效率上的问题：

第一个：串行的文件传输。当请求a文件时，b文件只能等待，等待a连接到服务器、服务器处理文件、服务器返回文件，这三个步骤。我们假设这三步用时都是1秒，那么a文件用时为3秒，b文件传输完成用时为6秒，依此类推。（注：此项计算有一个前提条件，就是浏览器和服务器是单通道传输）
第二个：连接数过多。我们假设Apache设置了最大并发数为300，因为浏览器限制，浏览器发起的最大请求数为6，也就是服务器能承载的最高并发为50，当第51个人访问时，就需要等待前面某个请求处理完成。

HTTP/2的多路复用就是为了解决上述的两个性能问题。
在 HTTP/2 中，有两个非常重要的概念，分别是帧（frame）和流（stream）。
帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。
多路复用，就是在一个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/http2-de-duo-lu-fu-yong">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/https-zhong-jian-ren-gong-ji">
                        HTTPS 中间人攻击
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-11</time>
                    
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-error">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            中间人攻击过程如下：

服务器向客户端发送公钥。
攻击者截获公钥，保留在自己手上。
然后攻击者自己生成一个【伪造的】公钥，发给客户端。
客户端收到伪造的公钥后，生成加密hash值发给服务器。
攻击者获得加密hash值，用自己的私钥解密获得真秘钥。
同时生成假的加密hash值，发给服务器。
服务器用私钥解密获得假秘钥。
服务器用加秘钥加密传输信息

防范方法：
服务端在发送浏览器的公钥中加入CA证书，浏览器可以验证CA证书的有效性

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/https-zhong-jian-ren-gong-ji">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/https-wo-shou-guo-cheng">
                        HTTPS 握手过程
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-11</time>
                    
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-other_1">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
第一步，客户端给出协议版本号、一个客户端生成的随机数（Client random），以及客户端支持的加密方法。
第二步，服务端确认双方使用的加密方法，并给出数字证书、以及一个服务器生成的随机数（Server random）。
第三步，客户端确认数字证书有效，然后生成一个新的随机数（Premaster secret），并使用数字证书中的公钥，加密这个随机数，发给服务端。
第四步，服务端使用自己的私钥，获取客户端发来的随机数（即Premaster secret）。
第五步，客户端和服务端根据约定的加密方法，使用前面的三个随机数，生成&amp;quot;对话密钥&amp;quot;（session key），用来加密接下来的整个对话过程。


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/https-wo-shou-guo-cheng">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/tcp-san-ci-wo-shou-si-ci-hui-shou">
                        TCP三次握手四次挥手
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-11</time>
                    
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-warning">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            三次握手

1、客户端发送 syn 包到服务器，等待服务器确认接收。
2、服务器确认接收 syn 包并确认客户的 syn ，并发送回来一个 syn+ack 的包给客户端。
3、客户端确认接收服务器的 syn+ack 包，并向服务器发送确认包 ack ，二者相互建立联系后，完成 tcp 三次握手。

四次挥手
四次握手就是三次握手中间多了一层 等待服务器再一次响应回复相关数据 的过程。
由于 TCP 连接是全双工的，因此每个方向都必须单独进行关闭，所以即使没有最后一个包，也需要先回复断开连接的请求，然后再发送关闭请求。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/tcp-san-ci-wo-shou-si-ci-hui-shou">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/https-wo-shou-guo-cheng-zhong-ke-hu-duan-ru-he-yan-zheng-zheng-shu-de-he-fa-xing">
                        HTTPS 握手过程中，客户端如何验证证书的合法性
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-11</time>
                    
                        <a href="https://blog.ss1742.com/tag/pKH4MDKew" class="post-tag i-tag
                            i-tag-info">
            #http
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
（1）首先浏览器读取证书中的证书所有者、有效期等信息进行校验，校验证书的网站域名是否与证书颁发的域名一致，校验证书是否在有效期内
（2）浏览器开始查找操作系统中已内置的受信任的证书发布机构CA，与服务器发来的证书中的颁发者CA比对，用于校验证书是否为合法机构颁发
（3）如果找不到，浏览器就会报错，说明服务器发来的证书是不可信任的。
（4）如果找到，那么浏览器就会从操作系统中取出颁发者CA 的公钥(多数浏览器开发商发布
版本时，会事先在内部植入常用认证机关的公开密钥)，然后对服务器发来的证书里面的签名进行解密
（5）浏览器使用相同的hash算法计算出服务器发来的证书的hash值，将这个计算的hash值与证书中签名做对比
（6）对比结果一致，则证明服务器发来的证书合法，没有被冒充


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/https-wo-shou-guo-cheng-zhong-ke-hu-duan-ru-he-yan-zheng-zheng-shu-de-he-fa-xing">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- 翻页 -->
                
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- 个人信息 -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://blog.ss1742.com/images/avatar.png?v=1573203446058)">
        </div>
        <h1 class="id_card-title">
            1742·小博文
        </h1>
        <h2 class="id_card-description">
            这是我的真博客
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                <a href="https://github.com/bowenjun" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-github"></i></a>
                
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- 公告栏 -->
                        

                </div>
            </div>



            <div class="site-footer">
  1742 | 
  <a class="rss" href="https://blog.ss1742.com/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>