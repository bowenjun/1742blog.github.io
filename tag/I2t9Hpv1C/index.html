<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    js基础 | 1742·小博文
</title>
<link rel="shortcut icon" href="https://blog.ss1742.com/favicon.ico?v=1563725875584">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://blog.ss1742.com/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://blog.ss1742.com/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://blog.ss1742.com">
                <img class="avatar" src="https://blog.ss1742.com/images/avatar.png?v=1563725875584" alt="">
            </a>
            <div class="site-title">
                <h1>
                    1742·小博文
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
    <div class="i-card">
        <b>标签：#
        js基础</b>
    </div>
    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/jin-zhi-liu-lan-qi-shi-jian">
                        禁止浏览器事件
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-22</time>
                    
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-info">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            禁用事件冒泡

event.stopPropagation()

禁止默认事件

event.preventDefault()


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/jin-zhi-liu-lan-qi-shi-jian">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/jsonp-yuan-li">
                        jsonp 原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-20</time>
                    
                        <a href="https://blog.ss1742.com/tag/1POfnEFWE" class="post-tag i-tag
                            i-tag-">
            #jsonp
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-other_3">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            尽管浏览器有同源策略，但是 &amp;lt;script&amp;gt; 标签的 src 属性不会被同源策略所约束，可以获取任意服务器上的脚本并执行。jsonp 通过插入 script 标签的方式来实现跨域，参数只能通过 url 传入，仅能支持 get 请求。
原理

创建 callback 方法
插入 script 标签
后台接受到请求，解析前端传过去的 callback 方法，返回该方法的调用，并且数据作为参数传入该方法
前端执行服务器返回的方法调用

实现
function jsonp({ url, params, callback }) {
	return new Promise((resolve, reject) =&amp;gt; {
		let script = document.createElement(&#39;script&#39;);
		window[callback] = function(data) {
			resolve(data);
			document.body.removeChild(script);
		}
		params = { ...params, callback };
		let arrs = [];
		for (let key in params) {
			arrs.push(`${key}=${params[key]}`);
		}
		script.src = `${url}?${arrs.join(&#39;&amp;amp;&#39;)}`;
		document.body.appendChild(script);
	})
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/jsonp-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/this-zhi-xiang">
                        this 指向
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-20</time>
                    
                        <a href="https://blog.ss1742.com/tag/ijEjqIkoA" class="post-tag i-tag
                            i-tag-other_4">
            #this
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-other_3">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            

this，谁调用指谁


构造函数的优先级(访问权限) &amp;gt; 原型链


new 的时候，this 就会指向 new 出来的对象


箭头函数



箭头函数相当于 bind，会改变this` 的指向
箭头函数的 this 是他父级的 this
箭头函数把 this 固定到他父级的同级作用

能改变 this 指向的关键词


bind


apply


call


一般函数 this 指向在执行的时候绑定


箭头函数中的 this 是在定义函数的时候绑定


严格模式



非严格模式下默认指向 window
严格模式下传 null 指向 null，不传或者传 undefined 都指向 undefined，即在严格模式下，没有写执行主体，this 指向是 undefined


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/this-zhi-xiang">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promiseall-shi-xian-yuan-li">
                        Promise.all 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-16</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-other_3">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-info">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Promise.prototype.all = function(promises) {
    return new Promise((resolve, reject) =&amp;gt; {
        if (!isArray(promises)) {
            return reject(new TypeError(&#39;Arguments not Array&#39;));
        }
        let resolves = 0;
        let len = promises.length;
        let result = [];
        for (let p of promises) {
            Promise.resolve(p).then(res =&amp;gt; {
                resolves++;
                result.push(res);
                if (resolves === len) {
                    resolve(result);
                }
            }, rej =&amp;gt; {
                return rekect(rej);
            })
        }
    })
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promiseall-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promisefinally-shi-xian-yuan-li">
                        Promise.finally 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-16</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-other_4">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-other_4">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Promise.prototype.finally = function(callback) {
    let P = this.constructor;
    return this.then(
        value  =&amp;gt; P.resolve(callback()).then(() =&amp;gt; value),
        reason =&amp;gt; P.resolve(callback()).then(() =&amp;gt; { throw reason })
    );
};


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promisefinally-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promiserace-shi-xian-yuan-li">
                        Promise.race 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-16</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-other_4">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Promise.prototype.race = function(promises) {
    return new Promise((resolve, reject) =&amp;gt; {
        if (!isArray(promises)) {
            return reject(new TypeError(&#39;Arguments not Array&#39;));
        }
        for (let p of promises) {
            Promise.resolve(p).then(
                res =&amp;gt; resolve(res), 
                rej =&amp;gt; reject(rej)
            )
        }
    })
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promiserace-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/promise-shi-xian-yuan-li">
                        Promise 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-15</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-info">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-warning">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            function myPromise(exe) {
    let self = this;
    self.status = &#39;pending&#39;;
    self.value = null;
    self.reason = null;
    self.onResolveCbk = [];
    self.onRejectCbk = [];
    function resolve(value) {
        if (self.status === &#39;pending&#39;) {
            self.value = value;
            self.status = &#39;resolved&#39;;
            self.onResolveCbk.map(fn =&amp;gt; fn());
        }
    }
    function reject(reason) {
        if (self.status === &#39;pending&#39;) {
            self.reason = reason;
            self.status = &#39;rejected&#39;;
            self.onResolveCbk.map(fn =&amp;gt; fn());
        }
    }
    exe(resolve, reject);
}

myPromise.prototype.then = function(onFulfilled, onRejected) {
    let self = this;
    if (self.status === &#39;pending&#39;) {
        self.onResolveCbk.push(() =&amp;gt; onFulfilled(self.value));
        self.onRejectCbk.push(() =&amp;gt; onRejected(self.reason));
    }
    if (self.status === &#39;resolved&#39;) {
        onFulfilled(self.value);
    }
    if (self.status === &#39;rejected&#39;) {
        onRejected(self.reason);
    }
}

let mp = new myPromise((resolve, reject) =&amp;gt; {
    setTimeout(() =&amp;gt; {
        resolve(2);
    }, 200);
});

mp.then(res =&amp;gt; console.log(&#39;success&#39;, res));


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/promise-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/new-de-shi-xian-yuan-li">
                        new 实现原理
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-15</time>
                    
                        <a href="https://blog.ss1742.com/tag/Glthk27Wp" class="post-tag i-tag
                            i-tag-">
            #原理
        </a>
                        
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            原理

创建一个空对象，构造函数中的 this 指向这个空对象
这个新对象被执行 [[原型]] 连接
执行构造函数方法，属性和方法被添加到 this 引用的对象中
如果构造函数中没有返回其它对象，那么返回 this，即创建的这个的新对象，否则，返回构造函数中返回的对象

function _new(fn, ...arg) {
    let obj = Object.create(fn.prototype);
    let ret = fn.apply(obj, arg);
    return ret instanceof Object ? ret : obj;
}

Object.create() 方法创建一个新对象，使用现有的对象来提供新创建的对象的 __proto__

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/new-de-shi-xian-yuan-li">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/yi-bu-jia-zai-js-jiao-ben-de-fang-shi-you-na-xie">
                        异步加载JS脚本的方式有哪些
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-14</time>
                    
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-success">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
&amp;lt;script&amp;gt; 标签中增加 async(html5) 或者 defer(html4) 属性,脚本就会异步加载。

defer 和 async 的区别在于：
defer 要等到整个页面在内存中正常渲染结束（DOM 结构完全生成，以及其他脚本执行完成），在 window.onload 之前执行；
async 一旦下载完，渲染引擎就会中断渲染，执行这个脚本以后，再继续渲染。
如果有多个 defer 脚本，会按照它们在页面出现的顺序加载
多个 async 脚本不能保证加载顺序

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/yi-bu-jia-zai-js-jiao-ben-de-fang-shi-you-na-xie">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://blog.ss1742.com/post/5add3reduce2">
                        (5).add(3).reduce(2)
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-10</time>
                    
                        <a href="https://blog.ss1742.com/tag/I2t9Hpv1C" class="post-tag i-tag
                            i-tag-info">
            #js基础
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Number.prototype.add = function(num) {
    if (typeof num === &#39;number&#39;) {
        return this + num;
    }
    return this;
}
Number.prototype.reduce = function(num) {
    if (typeof num === &#39;number&#39;) {
        return this - num;
    }
    return this;
}

console.log((5).add(3).reduce(2)); // 6

注意
这里使用 Number 和 Object 均可。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://blog.ss1742.com/post/5add3reduce2">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- 翻页 -->
                
    <div class="pagination-container">
        
                
                    <a href="https://blog.ss1742.com/tag/I2t9Hpv1C//page/2/" class="page-btn btn">下一页</a>
                    
    </div>
    
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- 个人信息 -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://blog.ss1742.com/images/avatar.png?v=1563725875584)">
        </div>
        <h1 class="id_card-title">
            1742·小博文
        </h1>
        <h2 class="id_card-description">
            这是我的真博客
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                <a href="https://github.com/bowenjun" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-github"></i></a>
                
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- 公告栏 -->
                        

                </div>
            </div>



            <div class="site-footer">
  1742 | 
  <a class="rss" href="https://blog.ss1742.com/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>