<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    前端性能优化 | 1742·小博文
</title>
<link rel="shortcut icon" href="https://blog.ss1742.com/favicon.ico?v=1564588914399">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://blog.ss1742.com/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://blog.ss1742.com/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
            
                <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
                <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
                

                    
                            
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://blog.ss1742.com">
                <img class="avatar" src="https://blog.ss1742.com/images/avatar.png?v=1564588914399" alt="">
            </a>
            <div class="site-title">
                <h1>
                    1742·小博文
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            前端性能优化
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-07-30</time>
                            
                        </div>
                        
                                <div class="post-content">
                                    <p>前端性能优化：减少请求数量、减小资源大小、优化网络连接、优化资源加载、减少重绘回流、使用更好性能的api和构建优化。</p>
<p>参考链接: <a href="https://www.cnblogs.com/xiaohuochai/p/9178390.html#anchor1">前端性能优化的七大手段</a></p>
<h3 id="减少请求数量">减少请求数量</h3>
<h4 id="合并">合并</h4>
<p>如果不合并影响</p>
<ul>
<li>文件之间插入的上行请求，增加了 n - 1 个网络延迟</li>
<li>受丢包问题影响更严重</li>
<li>经过代理服务器时可能会被断开</li>
</ul>
<p>合并带来的问题</p>
<ul>
<li>首屏渲染</li>
<li>缓存失效</li>
</ul>
<p>建议</p>
<ul>
<li>公共库合并</li>
<li>不同页面单独合并</li>
</ul>
<h4 id="图片处理">图片处理</h4>
<ol>
<li>雪碧图<br>
减少了请求数量，但如果图片过大一次加载过慢。现在因字体图片和 svg 图片流行渐渐使用少了<br>
2. base64<br>
base64 格式嵌入到 html 中，减少了请求数量，但是编码用8位字符表示信息中的6个位，编码后大小比原始值扩大了 33%<br>
3. 使用字体图标来替代图片</li>
</ol>
<h4 id="减少重定向">减少重定向</h4>
<p>如果使用重定向，要使用 301 永久重定向</p>
<h4 id="使用缓存">使用缓存</h4>
<p>Cache-Control 和 Expires</p>
<h4 id="不使用-import">不使用 @import</h4>
<h4 id="避免使用空-src-和-href">避免使用空 src 和 href</h4>
<h3 id="减小资源大小">减小资源大小</h3>
<h4 id="压缩">压缩</h4>
<ul>
<li>html 压缩</li>
<li>css 压缩</li>
<li>js 压缩与混淆</li>
<li>图片压缩（tinypng）</li>
</ul>
<h4 id="gzip">gzip</h4>
<h3 id="优化网络连接">优化网络连接</h3>
<h4 id="cdncontent-delivery-network">cdn(Content Delivery Network)</h4>
<h4 id="dns-预解析">dns 预解析</h4>
<pre><code class="language-html">&lt;link rel=&quot;dns-prefecth&quot; href=&quot;https://xxx.com&quot; /&gt;
</code></pre>
<h4 id="并行连接">并行连接</h4>
<p>域名发散，使用多个域名增加并发数</p>
<h4 id="持久连接">持久连接</h4>
<p>keep-alive</p>
<h4 id="管道化连接">管道化连接</h4>
<p>http2协议，单条连接多路复用</p>
<h3 id="优化资源下载">优化资源下载</h3>
<h4 id="资源加载位置">资源加载位置</h4>
<p>css 头部，js 尾部，布局 js 放在 head 中</p>
<h4 id="资源加载时机">资源加载时机</h4>
<ol>
<li>异步 script 标签<br>
defer: html 加载完后执行<br>
async: 下载完成立即执行<br>
2. 模块按需加载<br>
webpack 1. import() 2.require.ensure<br>
3. 懒加载</li>
</ol>
<h3 id="减少重绘回流">减少重绘回流</h3>
<h4 id="样式">样式</h4>
<ol>
<li>避免使用层级较深的选择器</li>
<li>避免使用 css 表达式</li>
<li>避免使用 table 布局</li>
<li>能用 css 尽量不要用 js</li>
</ol>
<h4 id="渲染层">渲染层</h4>
<ol>
<li>将需要多次重绘的元素独立，如设置 absolute，可以减少重绘范围</li>
<li>动画使用硬件渲染</li>
</ol>
<h4 id="dom-优化">dom 优化</h4>
<ol>
<li>缓存 dom</li>
<li>减少 dom 深度和数量</li>
<li>批量操作 dom</li>
<li>
<ul>
<li>事件代理</li>
</ul>
</li>
<li>
<ul>
<li>防抖节流</li>
</ul>
</li>
<li>及时清理环境</li>
</ol>
<h3 id="使用更好的api">使用更好的api</h3>
<h4 id="用对-css-选择器">用对 css 选择器</h4>
<h4 id="使用-requestanimationframe-替代计时器">使用 requestAnimationFrame 替代计时器</h4>
<h4 id="使用-intersectionobserver-实现图片可视区域懒加载">使用 IntersectionObserver 实现图片可视区域懒加载</h4>
<h4 id="使用-webworker">使用 webworker</h4>
<h3 id="构建优化">构建优化</h3>
<p>webpack</p>
<h4 id="打包公共代码">打包公共代码</h4>
<h4 id="动态导入-按需加载">动态导入 按需加载</h4>
<h4 id="剔除无用代码">剔除无用代码</h4>
<p>tree shaking</p>
<p>js - uglifyjs</p>
<p>css - purify css</p>
<h4 id="长缓存优化">长缓存优化</h4>
<ol>
<li>
<p>hash 替换为 chunkhash</p>
</li>
<li>
<p>使用 name 而不是 id</p>
</li>
</ol>
<h4 id="公用代码内联">公用代码内联</h4>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">下一篇</div>
                            <a href="https://blog.ss1742.com/post/mai-mai-gu-piao-de-zui-jia-shi-ji-ii">
                                <h3 class="post-title">
                                    买卖股票的最佳时机 II
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E5%87%8F%E5%B0%91%E8%AF%B7%E6%B1%82%E6%95%B0%E9%87%8F">减少请求数量</a>
<ul>
<li><a href="#%E5%90%88%E5%B9%B6">合并</a></li>
<li><a href="#%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86">图片处理</a></li>
<li><a href="#%E5%87%8F%E5%B0%91%E9%87%8D%E5%AE%9A%E5%90%91">减少重定向</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98">使用缓存</a></li>
<li><a href="#%E4%B8%8D%E4%BD%BF%E7%94%A8-import">不使用 @import</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E7%A9%BA-src-%E5%92%8C-href">避免使用空 src 和 href</a></li>
</ul>
</li>
<li><a href="#%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F">减小资源大小</a>
<ul>
<li><a href="#%E5%8E%8B%E7%BC%A9">压缩</a></li>
<li><a href="#gzip">gzip</a></li>
</ul>
</li>
<li><a href="#%E4%BC%98%E5%8C%96%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5">优化网络连接</a>
<ul>
<li><a href="#cdncontent-delivery-network">cdn(Content Delivery Network)</a></li>
<li><a href="#dns-%E9%A2%84%E8%A7%A3%E6%9E%90">dns 预解析</a></li>
<li><a href="#%E5%B9%B6%E8%A1%8C%E8%BF%9E%E6%8E%A5">并行连接</a></li>
<li><a href="#%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5">持久连接</a></li>
<li><a href="#%E7%AE%A1%E9%81%93%E5%8C%96%E8%BF%9E%E6%8E%A5">管道化连接</a></li>
</ul>
</li>
<li><a href="#%E4%BC%98%E5%8C%96%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD">优化资源下载</a>
<ul>
<li><a href="#%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BD%8D%E7%BD%AE">资源加载位置</a></li>
<li><a href="#%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E6%97%B6%E6%9C%BA">资源加载时机</a></li>
</ul>
</li>
<li><a href="#%E5%87%8F%E5%B0%91%E9%87%8D%E7%BB%98%E5%9B%9E%E6%B5%81">减少重绘回流</a>
<ul>
<li><a href="#%E6%A0%B7%E5%BC%8F">样式</a></li>
<li><a href="#%E6%B8%B2%E6%9F%93%E5%B1%82">渲染层</a></li>
<li><a href="#dom-%E4%BC%98%E5%8C%96">dom 优化</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%9B%B4%E5%A5%BD%E7%9A%84api">使用更好的api</a>
<ul>
<li><a href="#%E7%94%A8%E5%AF%B9-css-%E9%80%89%E6%8B%A9%E5%99%A8">用对 css 选择器</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-requestanimationframe-%E6%9B%BF%E4%BB%A3%E8%AE%A1%E6%97%B6%E5%99%A8">使用 requestAnimationFrame 替代计时器</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-intersectionobserver-%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%8F%AF%E8%A7%86%E5%8C%BA%E5%9F%9F%E6%87%92%E5%8A%A0%E8%BD%BD">使用 IntersectionObserver 实现图片可视区域懒加载</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-webworker">使用 webworker</a></li>
</ul>
</li>
<li><a href="#%E6%9E%84%E5%BB%BA%E4%BC%98%E5%8C%96">构建优化</a>
<ul>
<li><a href="#%E6%89%93%E5%8C%85%E5%85%AC%E5%85%B1%E4%BB%A3%E7%A0%81">打包公共代码</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5-%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD">动态导入 按需加载</a></li>
<li><a href="#%E5%89%94%E9%99%A4%E6%97%A0%E7%94%A8%E4%BB%A3%E7%A0%81">剔除无用代码</a></li>
<li><a href="#%E9%95%BF%E7%BC%93%E5%AD%98%E4%BC%98%E5%8C%96">长缓存优化</a></li>
<li><a href="#%E5%85%AC%E7%94%A8%E4%BB%A3%E7%A0%81%E5%86%85%E8%81%94">公用代码内联</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  1742 | 
  <a class="rss" href="https://blog.ss1742.com/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
        
            <script>
    window.onload = function() {
        var gitalk = new Gitalk({
            clientID: 'c726c72729117e1a7598',
            clientSecret: '427ee52e912b5a2a3753a568238fd6e802d1f492',
            repo: 'bowenjun.github.io',
            owner: 'bowenjun',
            admin: ['bowenjun'],
            id: (location.pathname).substring(0, 49), // Ensure uniqueness and length less than 50
            distractionFreeMode: false // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    }
</script>
                

                    
                                
</body>

</html>